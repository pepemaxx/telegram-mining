<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PiNet – Daily Mining Clicker</title>
  <style>
    :root{
      --bg1:#5a189a; --bg2:#7b2cbf; --ink:#ffffff; --muted:#e2e8f0; --card:rgba(0,0,0,.22);
      --brand:#f1c40f; --border:rgba(255,255,255,.2);
      --good:#10b981; --warn:#f59e0b; --disabled:rgba(255,255,255,.4);
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--ink);font-family:Inter, Poppins, Segoe UI, Roboto, system-ui, -apple-system, sans-serif;height:100vh;overflow:hidden;}
    .bg-stage{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;z-index:0}
    .emblem{position:relative;width:240px;height:240px;border-radius:50%;background:rgba(255,255,255,.06);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;box-shadow:0 8px 40px rgba(0,0,0,.25) inset, 0 0 0 1px var(--border);}
    .emblem .pi{font-size:96px;line-height:1;color:var(--brand);font-weight:900;text-shadow:0 0 24px rgba(241,196,15,.35);}
    .emblem .label{position:absolute;bottom:18px;font-weight:800;letter-spacing:.6px;color:var(--brand);text-shadow:0 0 18px rgba(241,196,15,.35)}
    .rings{position:absolute;inset:0;display:grid;place-items:center;}
    .ring{position:absolute;border:2px solid rgba(241,196,15,.35);border-radius:50%;animation:pulse 6s linear infinite;}
    .ring.r1{width:360px;height:360px;animation-delay:0s}
    .ring.r2{width:520px;height:520px;animation-delay:1s}
    .ring.r3{width:680px;height:680px;animation-delay:2s}
    @keyframes pulse{0%{opacity:.45}50%{opacity:.2}100%{opacity:.45}}

    #app{position:relative;z-index:1;height:100%;display:flex;flex-direction:column}
    header{position:sticky;top:0;z-index:5;background:rgba(0,0,0,.15);backdrop-filter:blur(8px);border-bottom:1px solid var(--border);padding:12px 16px;display:flex;align-items:center;justify-content:space-between}
    .title{font-weight:800;font-size:18px}
    .sub{font-size:12px;color:var(--muted)}
    .btn{border:none;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .btn-gold{background:var(--brand);color:#4c1d95}
    .btn-ghost{background:rgba(255,255,255,.12);color:#fff;border:1px solid var(--border)}

    main{flex:1;overflow-y:auto;padding:16px 16px 100px;max-width:820px;margin:0 auto}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px 16px;box-shadow:0 6px 24px rgba(0,0,0,.15);margin-top:12px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .muted{color:var(--muted);font-size:12px}
    .big{font-size:28px;font-weight:800}
    .pill{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.06)}
    .pill.good{background:rgba(16,185,129,.15);color:#d1fae5;border-color:rgba(16,185,129,.4)}
    .pill.warn{background:rgba(245,158,11,.14);color:#fff;border-color:rgba(245,158,11,.45)}

    .progress{height:10px;border-radius:999px;background:rgba(255,255,255,.18);overflow:hidden}
    .progress>div{height:100%;background:var(--brand);transition:width .25s}

    .mine-wrap{display:grid;gap:12px}
    .mine-cta{height:56px;font-size:16px}
    #timer{font-weight:800;color:#fee440;font-size:22px}
    .accent{color:var(--brand)}

    nav.tabs{position:fixed;left:0;right:0;bottom:0;border-top:1px solid var(--border);background:rgba(0,0,0,.18);backdrop-filter:blur(10px)}
    .tabs-inner{max-width:820px;margin:0 auto;height:72px;display:grid;grid-template-columns:repeat(5,1fr)}
    .tab-btn{appearance:none;background:none;border:none;color:#e2e8f0;font-size:14px;display:flex;align-items:center;justify-content:center}
    .tab-btn .pill{background:transparent}
    .tab-btn.active{color:var(--brand)}
    .tab-btn.active .pill{background:rgba(241,196,15,.12);border-color:rgba(241,196,15,.35)}

    .list{list-style:none;margin:0;padding:0}
    .list li{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-top:1px solid var(--border)}

    input, select{background:rgba(255,255,255,.08);border:1px solid var(--border);color:#fff;border-radius:10px;padding:10px 12px;outline:none}
    input::placeholder{color:#cbd5e1}
    .input-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

    section.tab{display:none}
    section.tab.active{display:block}
  </style>
</head>
<body>
<div class="bg-stage" aria-hidden="true">
  <div class="rings">
    <div class="ring r1"></div>
    <div class="ring r2"></div>
    <div class="ring r3"></div>
  </div>
  <div class="emblem">
    <div class="pi">π</div>
    <div class="label">PiNet</div>
  </div>
</div>

<div id="app">
  <header>
    <div>
      <div class="title">PiNet – Daily Mining</div>
      <div class="sub">24h mining • Persistent (LocalStorage)</div>
    </div>
    <button id="resetBtn" class="btn btn-ghost">Reset</button>
  </header>
<main>
<section class="tab active" id="tab-mining">
  <div class="card row">
    <div>
      <div class="muted">Wallet Balance</div>
      <div class="big"><span id="balance">0</span> <span class="muted" style="font-size:14px">coins</span></div>
    </div>
    <div style="text-align:end">
      <div class="muted">Mining Status</div>
      <div id="miningStatus" class="pill">Inactive</div>
    </div>
  </div>

  <div class="card mine-wrap">
    <div class="row" style="align-items:flex-end">
      <div>
        <div class="muted">Time remaining</div>
        <div id="timer">00:00:00</div>
      </div>
      <div style="text-align:end">
        <div class="muted">Earnings this session</div>
        <div class="big accent"><span id="sessionEarnings">0</span> coins</div>
      </div>
    </div>
    <div class="progress"><div id="progressBar" style="width:0%"></div></div>
    <div class="row">
      <button id="startBtn" class="btn btn-gold mine-cta">Start 24h mining</button>
      <button id="claimBtn" class="btn btn-ghost mine-cta" disabled>Finish & Claim</button>
    </div>
    <div class="muted">Current rate: <span id="rateText">0.05</span> coin/sec • Close app anytime; progress continues.</div>
  </div>
</section>

<!-- سایر تب ها را مشابه قبلی قرار دهید -->
<!-- Wallet, Friends, Tasks, Profile -->
<!-- برای کوتاه شدن، همان ساختار قبلی تب ها را نگه دارید -->

</main>

<nav class="tabs">
  <div class="tabs-inner">
    <button class="tab-btn active" data-tab="mining"><span class="pill">Mining</span></button>
    <button class="tab-btn" data-tab="wallet"><span class="pill">Wallet</span></button>
    <button class="tab-btn" data-tab="friends"><span class="pill">Friends</span></button>
    <button class="tab-btn" data-tab="tasks"><span class="pill">Tasks</span></button>
    <button class="tab-btn" data-tab="profile"><span class="pill">Profile</span></button>
  </div>
</nav>
</div>

<script>
// آدرس بک‌اند
const API_BASE = 'https://pinet-backend-production.up.railway.app';

// تب‌ها
document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('section.tab').forEach(s=>s.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-'+btn.dataset.tab).classList.add('active');
  });
});

// تایمر ماینینگ
const balanceEl = document.getElementById('balance');
const startBtn = document.getElementById('startBtn');
const claimBtn = document.getElementById('claimBtn');
const timerEl = document.getElementById('timer');
const progressBarEl = document.getElementById('progressBar');
const sessionEarningsEl = document.getElementById('sessionEarnings');

const DURATION_MS = 24*60*60*1000; // 24 ساعت
const RATE_PER_SEC = 0.05;

let state = {
  coins:0,
  miningStart:null,
  miningEnd:null,
  sessionEarnings:0
};

function formatTime(ms){
  let totalSec = Math.floor(ms/1000);
  let h = String(Math.floor(totalSec/3600)).padStart(2,'0');
  let m = String(Math.floor((totalSec%3600)/60)).padStart(2,'0');
  let s = String(totalSec%60).padStart(2,'0');
  return `${h}:${m}:${s}`;
}

let timerInterval = null;
function updateTimer(){
  if(!state.miningStart) {
    timerEl.textContent = "00:00:00";
    progressBarEl.style.width = "0%";
    sessionEarningsEl.textContent = "0";
    claimBtn.disabled = true;
    return;
  }
  const now = Date.now();
  const end = state.miningEnd;
  const diff = end - now;
  if(diff <=0){
    timerEl.textContent = "00:00:00";
    progressBarEl.style.width = "100%";
    state.sessionEarnings = DURATION_MS/1000 * RATE_PER_SEC;
    sessionEarningsEl.textContent = state.sessionEarnings.toFixed(2);
    claimBtn.disabled = false;
    clearInterval(timerInterval);
    return;
  }
  timerEl.textContent = formatTime(diff);
  const progress = ((now - state.miningStart)/DURATION_MS)*100;
  progressBarEl.style.width = progress+"%";
  state.sessionEarnings = ((now - state.miningStart)/1000) * RATE_PER_SEC;
  sessionEarningsEl.textContent = state.sessionEarnings.toFixed(2);
}

startBtn.addEventListener('click',()=>{
  state.miningStart = Date.now();
  state.miningEnd = state.miningStart + DURATION_MS;
  claimBtn.disabled = true;
  if(timerInterval) clearInterval(timerInterval);
  timerInterval = setInterval(updateTimer,1000);
  updateTimer();
});

claimBtn.addEventListener('click',()=>{
  state.coins += state.sessionEarnings;
  balanceEl.textContent = state.coins.toFixed(2);
  state.miningStart = null;
  state.miningEnd = null;
  state.sessionEarnings = 0;
  claimBtn.disabled = true;
  progressBarEl.style.width = "0%";
  timerEl.textContent = "00:00:00";
  if(timerInterval) clearInterval(timerInterval);
});

// مقدار اولیه
balanceEl.textContent = state.coins.toFixed(2);
updateTimer();
</script>
</body>
</html>