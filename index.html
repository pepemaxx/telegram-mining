<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PiNet – Advanced Mining App</title>
<style>
:root{
  --bg1:#5a189a; --bg2:#7b2cbf; --ink:#ffffff; --muted:#e2e8f0;
  --card:rgba(0,0,0,.22); --brand:#f1c40f; --border:rgba(255,255,255,.2);
  --good:#10b981; --warn:#f59e0b; --disabled:rgba(255,255,255,.4);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  margin:0;font-family:Inter, Poppins, sans-serif;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--ink);height:100vh;overflow:hidden;
  background-image: url('https://i.imgur.com/1c8v6Gz.png'); /* سکه PiNet */
  background-size: 200px 200px;
  background-repeat: no-repeat;
  background-position: center;
}

/* ===== Background emblem ===== */
.bg-stage{
  position:fixed;inset:0;display:flex;
  align-items:center;justify-content:center;
  pointer-events:none;z-index:0;
}

/* ===== App ===== */
#app{position:relative;z-index:1;height:100%;display:flex;flex-direction:column;}
header{
  position:sticky;top:0;z-index:5;
  background:rgba(0,0,0,.15);backdrop-filter:blur(8px);
  border-bottom:1px solid var(--border);
  padding:12px 16px;display:flex;justify-content:space-between;align-items:center;
}
.title{font-weight:800;font-size:18px;}
.sub{font-size:12px;color:var(--muted);}
.btn{border:none;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer;}
.btn:disabled{opacity:.6;cursor:not-allowed;}
.btn-gold{background:var(--brand);color:#4c1d95;}
.btn-ghost{background:rgba(255,255,255,.12);color:#fff;border:1px solid var(--border);}

main{flex:1;overflow-y:auto;padding:16px 16px 100px;max-width:820px;margin:0 auto;}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px 16px;margin-top:12px;}
.row{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.muted{color:var(--muted);font-size:12px;}
.big{font-size:28px;font-weight:800;}
.pill{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.06);}
.pill.good{background:rgba(16,185,129,.15);color:#d1fae5;border-color:rgba(16,185,129,.4);}
.pill.warn{background:rgba(245,158,11,.14);color:#fff;border-color:rgba(245,158,11,.45);}

.progress{height:10px;border-radius:999px;background:rgba(255,255,255,.18);overflow:hidden;}
.progress>div{height:100%;background:var(--brand);transition:width .25s;}

/* Tabs */
nav.tabs{position:fixed;left:0;right:0;bottom:0;border-top:1px solid var(--border);background:rgba(0,0,0,.18);backdrop-filter:blur(10px);}
.tabs-inner{max-width:820px;margin:0 auto;height:72px;display:grid;grid-template-columns:repeat(7,1fr);}
.tab-btn{appearance:none;background:none;border:none;color:#e2e8f0;font-size:14px;display:flex;align-items:center;justify-content:center;flex-direction:column;}
.tab-btn.active{color:var(--brand);}
.tab-btn .pill{background:transparent;}

/* Inputs */
input, select{background:rgba(255,255,255,.08);border:1px solid var(--border);color:#fff;border-radius:10px;padding:10px 12px;outline:none;}
input::placeholder{color:#cbd5e1;}
.input-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
section.tab{display:none;}
section.tab.active{display:block;}
</style>
</head>
<body>
<div id="app">
  <header>
    <div>
      <div class="title">PiNet – Mining App</div>
      <div class="sub">24h mining • Persistent</div>
    </div>
    <button id="resetBtn" class="btn btn-ghost">Reset</button>
  </header>

  <main>
    <!-- Mining -->
    <section class="tab active" id="tab-mining">
      <div class="card row">
        <div>
          <div class="muted">Wallet Balance</div>
          <div class="big"><span id="balance">0</span> coins</div>
        </div>
        <div style="text-align:end">
          <div class="muted">Mining Status</div>
          <div id="miningStatus" class="pill">Inactive</div>
        </div>
      </div>

      <div class="card">
        <div class="row" style="align-items:flex-end">
          <div>
            <div class="muted">Time remaining</div>
            <div id="timer">00:00:00</div>
          </div>
          <div style="text-align:end">
            <div class="muted">Earnings this session</div>
            <div class="big accent"><span id="sessionEarnings">0</span> coins</div>
          </div>
        </div>
        <div class="progress"><div id="progressBar" style="width:0%"></div></div>
        <div class="row">
          <button id="startBtn" class="btn btn-gold mine-cta">Start 24h Mining</button>
          <button id="claimBtn" class="btn btn-ghost mine-cta" disabled>Finish & Claim</button>
        </div>
      </div>
    </section>

    <!-- Wallet -->
    <section class="tab" id="tab-wallet">
      <div class="card row">
        <div>
          <div class="muted">Coins</div>
          <div class="big" id="coinsBalance">0</div>
        </div>
        <div>
          <div class="muted">Pi</div>
          <div class="big" id="piBalance">0</div>
        </div>
        <div>
          <div class="muted">USDT</div>
          <div class="big" id="usdtBalance">0</div>
        </div>
      </div>
    </section>

    <!-- Friends -->
    <section class="tab" id="tab-friends">
      <div class="card row">
        <div>Invited: <span id="friendsInvited">0</span></div>
        <div>Active: <span id="friendsActive">0</span></div>
      </div>
    </section>

    <!-- Tasks -->
    <section class="tab" id="tab-tasks">
      <div class="card" id="tasksWrap"></div>
    </section>

    <!-- Manual Mining -->
    <section class="tab" id="tab-manual">
      <div class="card">
        <div class="muted">Click the button to manually mine coins:</div>
        <button id="manualMineBtn" class="btn btn-gold" style="margin-top:8px;">Mine +1 coin</button>
      </div>
    </section>

    <!-- News -->
    <section class="tab" id="tab-news">
      <div class="card" id="newsWrap">Loading news...</div>
    </section>

    <!-- Profile -->
    <section class="tab" id="tab-profile">
      <div class="card">
        <input id="firstName" placeholder="First Name">
        <input id="lastName" placeholder="Last Name">
        <input id="userId" placeholder="User ID">
        <button id="saveProfile" class="btn btn-gold">Save</button>
      </div>
    </section>
  </main>

  <nav class="tabs">
    <div class="tabs-inner">
      <button class="tab-btn active" data-tab="mining"><span class="pill">Mining</span></button>
      <button class="tab-btn" data-tab="wallet"><span class="pill">Wallet</span></button>
      <button class="tab-btn" data-tab="friends"><span class="pill">Friends</span></button>
      <button class="tab-btn" data-tab="tasks"><span class="pill">Tasks</span></button>
      <button class="tab-btn" data-tab="manual"><span class="pill">Manual</span></button>
      <button class="tab-btn" data-tab="news"><span class="pill">News</span></button>
      <button class="tab-btn" data-tab="profile"><span class="pill">Profile</span></button>
    </div>
  </nav>
</div>

<script>
// ===== Config =====
const DURATION_MS = 24*60*60*1000;
const RATE_PER_SEC = 0.05;
const STORAGE_KEY = 'pinet_clicker_v4';

// ===== State =====
const state = load() || {coins:0, miningStart:null};

// ===== Elements =====
const balanceEl = document.getElementById('balance');
const miningStatusEl = document.getElementById('miningStatus');
const timerEl = document.getElementById('timer');
const sessionEarningsEl = document.getElementById('sessionEarnings');
const progressBarEl = document.getElementById('progressBar');
const startBtn = document.getElementById('startBtn');
const claimBtn = document.getElementById('claimBtn');

const coinsBalanceEl = document.getElementById('coinsBalance');
const manualMineBtn = document.getElementById('manualMineBtn');

// ===== Tabs =====
document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('section.tab').forEach(t=>t.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-'+btn.dataset.tab).classList.add('active');
  });
});

// ===== Mining =====
let tickId = null;
function miningMetrics(){
  if(!state.miningStart) return {elapsed:0, remaining:0, progress:0, rewardNow:0};
  const now = Date.now();
  const elapsed = Math.max(0, now - state.miningStart);
  const remaining = Math.max(0, DURATION_MS - elapsed);
  const progress = (elapsed/DURATION_MS)*100;
  const rewardNow = (elapsed/1000)*RATE_PER_SEC;
  return {elapsed, remaining, progress, rewardNow};
}

function formatHHMMSS(ms){
  const s = Math.max(0, Math.floor(ms/1000));
  const h = String(Math.floor(s/3600)).padStart(2,'0');
  const m = String(Math.floor((s%3600)/60)).padStart(2,'0');
  const ss = String(s%60).padStart(2,'0');
  return `${h}:${m}:${ss}`;
}

function tick(){
  const {remaining, progress, rewardNow} = miningMetrics();
  timerEl.textContent = formatHHMMSS(remaining);
  sessionEarningsEl.textContent = rewardNow.toFixed(2);
  progressBarEl.style.width = `${progress}%`;
  if(remaining<=0){
    clearInterval(tickId); tickId=null;
    claimBtn.disabled = false;
    miningStatusEl.textContent = 'Completed';
    miningStatusEl.className='pill warn';
  }
}

function runTick(){
  clearInterval(tickId);
  tick();
  tickId = setInterval(tick,1000);
}

function updateMiningUI(){
  balanceEl.textContent = Math.floor(state.coins);
  if(state.miningStart){
    startBtn.disabled=false; claimBtn.disabled=false;
    miningStatusEl.textContent='Active';
    miningStatusEl.className='pill good';
    runTick();
  } else {
    startBtn.disabled=false; claimBtn.disabled=true;
    miningStatusEl.textContent='Inactive';
    miningStatusEl.className='pill';
    timerEl.textContent='00:00:00';
    sessionEarningsEl.textContent='0';
    progressBarEl.style.width='0%';
  }
}

startBtn.addEventListener('click',()=>{
  state.miningStart=Date.now();
  save();
  updateMiningUI();
});

claimBtn.addEventListener('click', ()=>{
  if(!state.miningStart) return;
  const {rewardNow} = miningMetrics();
  state.coins += rewardNow;
  state.miningStart = null;
  save();
  updateMiningUI();
});

// ===== Manual Mining =====
manualMineBtn.addEventListener('click', ()=>{
  state.coins +=1;
  save();
  updateMiningUI();
  coinsBalanceEl.textContent = Math.floor(state.coins);
});

// ===== Reset =====
document.getElementById('resetBtn').addEventListener('click', ()=>{
  if(confirm('Reset all progress?')){
    Object.assign(state,{coins:0,miningStart:null});
    save();
    updateMiningUI();
  }
});

// ===== Persistence =====
function load(){try{return JSON.parse(localStorage.getItem(STORAGE_KEY))}catch(e){return null;}}
function save(){try{localStorage.setItem(STORAGE_KEY,JSON.stringify(state))}catch(e){}}

// ===== Tasks Demo =====
const tasksWrap = document.getElementById('tasksWrap');
const TASKS=[
  {id:'t1',title:'Join Telegram',reward:10},
  {id:'t2',title:'Follow Instagram',reward:15},
];
TASKS.forEach(t=>{
  const div = document.createElement('div');
  div.style.margin='6px 0';
  div.innerHTML = `<span>${t.title}</span> <button class="btn btn-gold">Claim ${t.reward}</button>`;
  tasksWrap.appendChild(div);
});

// ===== News Demo =====
const newsWrap = document.getElementById('newsWrap');
newsWrap.innerHTML = '<ul><li>PiNet v2 released!</li><li>New mining event starts tomorrow.</li></ul>';
</script>
</body>
</html>