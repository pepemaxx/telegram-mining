<!-- نسخه کامل بازی با تب‌های اضافه شده: پیش‌بینی مسابقه و آزمون لغات -->
<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بازی ماینینگ تلگرام</title>
    <style>
        body {font-family: sans-serif; background: #f5f5f5; margin:0; padding:0; direction: rtl;}
        header {background:#4caf50; color:#fff; padding:10px; text-align:center; font-size:20px;}
        .tab-content {display:none; padding:15px;}
        .active {display:block;}
        .tabs {position: fixed; bottom:0; width:100%; display:flex; background:#fff; border-top:1px solid #ccc;}
        .tab {flex:1; text-align:center; padding:10px; cursor:pointer;}
        .tab.active {background:#4caf50; color:#fff;}
        .card {background:#fff; margin:10px 0; padding:10px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
        button {padding:8px 12px; background:#4caf50; color:#fff; border:none; border-radius:5px; cursor:pointer;}
        button:disabled {background:#999;}
        .task a {color:#007bff; text-decoration:none;}
        .task {margin:5px 0;}
        .progress-bar {height:20px; background:#ddd; border-radius:10px; overflow:hidden; margin:10px 0;}
        .progress {height:100%; background:#4caf50; width:0%; transition:width 0.5s;}
    </style>
</head>
<body>
<header>بازی ماینینگ تلگرام</header>

<div id="mining" class="tab-content active">
    <div class="card">
        <div>درآمد فعلی: <span id="minedCoins">0</span> سکه</div>
        <div class="progress-bar"><div class="progress" id="miningProgress"></div></div>
        <button id="startMining">شروع ماینینگ ۲۴ ساعته</button>
        <button id="claimMining" disabled>اتمام و دریافت</button>
        <div>زمان باقی‌مانده: <span id="miningTimer">--:--:--</span></div>
    </div>
</div>

<div id="wallet" class="tab-content">
    <div class="card">
        <div>موجودی کیف پول: <span id="walletBalance">0</span> سکه</div>
        <h4>تراکنش‌ها:</h4>
        <ul id="transactions"></ul>
    </div>
</div>

<div id="friends" class="tab-content">
    <div class="card">
        <div>لینک دعوت: <input id="inviteLink" readonly style="width:80%"> <button id="copyLink">کپی</button></div>
        <button id="simulateReferral">شبیه‌سازی دعوت</button>
    </div>
</div>

<div id="tasks" class="tab-content">
    <div class="card">
        <div class="task"><a href="https://t.me/examplechannel" target="_blank">عضویت در کانال تلگرام ما</a> <button class="claimTask" data-coins="10">دریافت</button></div>
        <div class="task"><a href="https://instagram.com/example" target="_blank">فالو اینستاگرام</a> <button class="claimTask" data-coins="10">دریافت</button></div>
        <div class="task"><a href="https://twitter.com/example" target="_blank">فالو توییتر</a> <button class="claimTask" data-coins="10">دریافت</button></div>
    </div>
</div>

<div id="predict" class="tab-content">
    <div class="card">
        <h3>پیش‌بینی مسابقات</h3>
        <div id="matches"></div>
    </div>
</div>

<div id="words" class="tab-content">
    <div class="card">
        <h3>آزمون لغات ۵۰۴</h3>
        <div id="wordQuiz"></div>
    </div>
</div>

<div class="tabs">
    <div class="tab active" data-target="mining">ماینینگ</div>
    <div class="tab" data-target="wallet">کیف پول</div>
    <div class="tab" data-target="friends">دوستان</div>
    <div class="tab" data-target="tasks">وظایف</div>
    <div class="tab" data-target="predict">پیش‌بینی</div>
    <div class="tab" data-target="words">لغات</div>
</div>

<script>
// سوئیچ تب‌ها
const tabs = document.querySelectorAll('.tab');
const contents = document.querySelectorAll('.tab-content');
tabs.forEach(tab=>{
  tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    contents.forEach(c=>c.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.target).classList.add('active');
  });
});

// کیف پول و تراکنش
let walletBalance = parseInt(localStorage.getItem('walletBalance')||0);
document.getElementById('walletBalance').innerText = walletBalance;
function addTransaction(desc,amount){
  const li = document.createElement('li');
  li.textContent = `${desc}: ${amount} سکه`;
  document.getElementById('transactions').appendChild(li);
}

// ماینینگ با تایمر پایدار
const startBtn=document.getElementById('startMining');
const claimBtn=document.getElementById('claimMining');
const minedCoinsEl=document.getElementById('minedCoins');
const timerEl=document.getElementById('miningTimer');
const progressEl=document.getElementById('miningProgress');
let miningStart=parseInt(localStorage.getItem('miningStart')||0);
let claimed=false;
const duration=24*60*60*1000; //24ساعت
function updateMining(){
  if(miningStart){
    const elapsed=Date.now()-miningStart;
    if(elapsed<duration){
      const remaining=duration-elapsed;
      const hrs=Math.floor(remaining/3600000);
      const mins=Math.floor((remaining%3600000)/60000);
      const secs=Math.floor((remaining%60000)/1000);
      timerEl.textContent=`${hrs}:${mins}:${secs}`;
      const mined=Math.floor((elapsed/duration)*100);
      minedCoinsEl.textContent=mined;
      progressEl.style.width=(elapsed/duration*100)+"%";
      startBtn.disabled=true; claimBtn.disabled=true;
    } else {
      timerEl.textContent="تمام شد";
      minedCoinsEl.textContent=100;
      startBtn.disabled=true; claimBtn.disabled=false;
    }
  } else {
    timerEl.textContent="--:--:--"; minedCoinsEl.textContent=0;
    startBtn.disabled=false; claimBtn.disabled=true;
    progressEl.style.width="0%";
  }
}
setInterval(updateMining,1000);
startBtn.onclick=()=>{miningStart=Date.now();localStorage.setItem('miningStart',miningStart);}
claimBtn.onclick=()=>{walletBalance+=100;localStorage.setItem('walletBalance',walletBalance);document.getElementById('walletBalance').innerText=walletBalance;addTransaction('پاداش ماینینگ',100);miningStart=0;localStorage.removeItem('miningStart');updateMining();}

// لینک دعوت
const invite=document.getElementById('inviteLink');
invite.value=window.location.href+"?ref=USER";

document.getElementById('copyLink').onclick=()=>{invite.select();document.execCommand('copy');alert('کپی شد');}
document.getElementById('simulateReferral').onclick=()=>{walletBalance+=50;localStorage.setItem('walletBalance',walletBalance);document.getElementById('walletBalance').innerText=walletBalance;addTransaction('پاداش دعوت',50);}

// وظایف
const taskButtons=document.querySelectorAll('.claimTask');
taskButtons.forEach(btn=>{
  btn.onclick=()=>{
    if(!btn.disabled){
      const c=parseInt(btn.dataset.coins);
      walletBalance+=c;localStorage.setItem('walletBalance',walletBalance);
      document.getElementById('walletBalance').innerText=walletBalance;
      addTransaction('پاداش وظیفه',c);
      btn.disabled=true;
    }
  }
});

// پیش‌بینی مسابقه نمونه
const matches=[
  {id:1,teamA:'تیم الف',teamB:'تیم ب'},
  {id:2,teamA:'تیم ج',teamB:'تیم د'},
  {id:3,teamA:'تیم ه',teamB:'تیم و'}
];
const matchesDiv=document.getElementById('matches');
matches.forEach(m=>{
  const div=document.createElement('div');
  div.innerHTML=`${m.teamA} vs ${m.teamB} <button data-mid="${m.id}" data-opt="A">برد ${m.teamA}</button> <button data-mid="${m.id}" data-opt="B">برد ${m.teamB}</button> <button data-mid="${m.id}" data-opt="D">مساوی</button>`;
  matchesDiv.appendChild(div);
});
document.querySelectorAll('#matches button').forEach(btn=>{
  btn.onclick=()=>{alert('پیش‌بینی ثبت شد');}
});

// آزمون لغات نمونه روزانه
const words=[
  {q:'Meaning of Abandon?',a:['ترک کردن','دوست داشتن'],c:0},
  {q:'Meaning of Keen?',a:['تیز و مشتاق','کسل'],c:0},
  {q:'Meaning of Jealous?',a:['حسود','مهربان'],c:0},
  {q:'Meaning of Tact?',a:['تدبیر','بی ملاحظه'],c:0},
  {q:'Meaning of Oath?',a:['قسم','دروغ'],c:0}
];
const quizDiv=document.getElementById('wordQuiz');
words.forEach((w,i)=>{
  const div=document.createElement('div');
  div.innerHTML=`<p>${w.q}</p><button data-i="${i}" data-o="0">${w.a[0]}</button><button data-i="${i}" data-o="1">${w.a[1]}</button>`;
  quizDiv.appendChild(div);
});
quizDiv.querySelectorAll('button').forEach(btn=>{
  btn.onclick=()=>{
    const wi=words[btn.dataset.i];
    if(parseInt(btn.dataset.o)===wi.c){walletBalance+=5;localStorage.setItem('walletBalance',walletBalance);document.getElementById('walletBalance').innerText=walletBalance;addTransaction('پاداش لغت',5);alert('درست! ۵ سکه گرفتید');} else {alert('اشتباه');}
    btn.parentElement.querySelectorAll('button').forEach(b=>b.disabled=true);
  }
});
</script>
</body>
</html>
